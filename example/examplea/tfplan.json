{"format_version":"0.1","terraform_version":"0.13.4","variables":{"common_tags":{"value":{"name":"Pizza"}},"mq_broker":{"value":{"engine_type":"ActiveMQ","engine_version":"5.15.0","host_instance_type":"mq.t2.micro","name":"authentic"}},"my_config":{"value":{"description":"authentic Configuration","engine_type":"ActiveMQ","engine_version":"5.15.0","name":"authentic"}},"sub_private_tag":{"value":"Public"},"sub_public_tag":{"value":"Public"},"vpc_name_tag":{"value":"TEST"}},"planned_values":{"outputs":{"broker":{"sensitive":false},"configuration":{"sensitive":false},"mq_password":{"sensitive":false},"mq_username":{"sensitive":false,"value":"ExampleUser"}},"root_module":{"child_modules":[{"resources":[{"address":"module.broker.aws_mq_broker.broker","mode":"managed","type":"aws_mq_broker","name":"broker","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"apply_immediately":false,"auto_minor_version_upgrade":false,"broker_name":"authentic","configuration":[{}],"deployment_mode":"SINGLE_INSTANCE","encryption_options":[{"use_aws_owned_key":false}],"engine_type":"ActiveMQ","engine_version":"5.15.0","host_instance_type":"mq.t2.micro","logs":[{"audit":false,"general":true}],"maintenance_window_start_time":[{"day_of_week":"MONDAY","time_of_day":"12:05","time_zone":"GMT"}],"publicly_accessible":false,"subnet_ids":["subnet-05808ec64faaa18ba"],"tags":{"name":"Pizza"},"user":[{"console_access":false,"groups":[],"password":"TobeEncrypted","username":"NotAdmin"}]}},{"address":"module.broker.aws_mq_configuration.broker","mode":"managed","type":"aws_mq_configuration","name":"broker","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"data":"\u003c?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?\u003e\n\u003cbroker xmlns=\"http://activemq.apache.org/schema/core\"\u003e\n  \u003cplugins\u003e\n    \u003cforcePersistencyModeBrokerPlugin persistenceFlag=\"true\"/\u003e\n    \u003cstatisticsBrokerPlugin/\u003e\n    \u003ctimeStampingBrokerPlugin ttlCeiling=\"86400000\" zeroExpirationOverride=\"86400000\"/\u003e\n  \u003c/plugins\u003e\n\u003c/broker\u003e\n","description":"authentic Configuration","engine_type":"ActiveMQ","engine_version":"5.15.0","name":"authentic","tags":{"name":"Pizza"}}},{"address":"module.broker.aws_security_group.broker","mode":"managed","type":"aws_security_group","name":"broker","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"MQ port","from_port":61616,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":61616}],"name":"Broker","name_prefix":null,"revoke_rules_on_delete":false,"tags":{"name":"Pizza"},"timeouts":null,"vpc_id":"vpc-0e2e925de622375b5"}},{"address":"module.broker.random_password.password","mode":"managed","type":"random_password","name":"password","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"keepers":null,"length":16,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"override_special":"_%@","special":true,"upper":true}}],"address":"module.broker"}]}},"resource_changes":[{"address":"module.broker.aws_mq_broker.broker","module_address":"module.broker","mode":"managed","type":"aws_mq_broker","name":"broker","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"apply_immediately":false,"auto_minor_version_upgrade":false,"broker_name":"authentic","configuration":[{}],"deployment_mode":"SINGLE_INSTANCE","encryption_options":[{"use_aws_owned_key":false}],"engine_type":"ActiveMQ","engine_version":"5.15.0","host_instance_type":"mq.t2.micro","logs":[{"audit":false,"general":true}],"maintenance_window_start_time":[{"day_of_week":"MONDAY","time_of_day":"12:05","time_zone":"GMT"}],"publicly_accessible":false,"subnet_ids":["subnet-05808ec64faaa18ba"],"tags":{"name":"Pizza"},"user":[{"console_access":false,"groups":[],"password":"TobeEncrypted","username":"NotAdmin"}]},"after_unknown":{"arn":true,"configuration":[{"id":true,"revision":true}],"encryption_options":[{"kms_key_id":true}],"id":true,"instances":true,"logs":[{}],"maintenance_window_start_time":[{}],"security_groups":true,"subnet_ids":[false],"tags":{},"user":[{"groups":[]}]}}},{"address":"module.broker.aws_mq_configuration.broker","module_address":"module.broker","mode":"managed","type":"aws_mq_configuration","name":"broker","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"data":"\u003c?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?\u003e\n\u003cbroker xmlns=\"http://activemq.apache.org/schema/core\"\u003e\n  \u003cplugins\u003e\n    \u003cforcePersistencyModeBrokerPlugin persistenceFlag=\"true\"/\u003e\n    \u003cstatisticsBrokerPlugin/\u003e\n    \u003ctimeStampingBrokerPlugin ttlCeiling=\"86400000\" zeroExpirationOverride=\"86400000\"/\u003e\n  \u003c/plugins\u003e\n\u003c/broker\u003e\n","description":"authentic Configuration","engine_type":"ActiveMQ","engine_version":"5.15.0","name":"authentic","tags":{"name":"Pizza"}},"after_unknown":{"arn":true,"id":true,"latest_revision":true,"tags":{}}}},{"address":"module.broker.aws_security_group.broker","module_address":"module.broker","mode":"managed","type":"aws_security_group","name":"broker","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Outbound","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"MQ port","from_port":61616,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":61616}],"name":"Broker","name_prefix":null,"revoke_rules_on_delete":false,"tags":{"name":"Pizza"},"timeouts":null,"vpc_id":"vpc-0e2e925de622375b5"},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"owner_id":true,"tags":{}}}},{"address":"module.broker.random_password.password","module_address":"module.broker","mode":"managed","type":"random_password","name":"password","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":16,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"override_special":"_%@","special":true,"upper":true},"after_unknown":{"id":true,"result":true}}}],"output_changes":{"broker":{"actions":["create"],"before":null,"after_unknown":true},"configuration":{"actions":["create"],"before":null,"after_unknown":true},"mq_password":{"actions":["create"],"before":null,"after_unknown":true},"mq_username":{"actions":["create"],"before":null,"after":"ExampleUser","after_unknown":false}},"prior_state":{"format_version":"0.1","terraform_version":"0.13.4","values":{"outputs":{"mq_username":{"sensitive":false,"value":"ExampleUser"}},"root_module":{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"680235478471","arn":"arn:aws:iam::680235478471:user/jameswoolfenden","id":"2020-10-15 12:48:18.3668535 +0000 UTC","user_id":"AIDAJ72LXRQTQWVTFHSMM"}},{"address":"data.aws_subnet_ids.private","mode":"data","type":"aws_subnet_ids","name":"private","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"filter":[{"name":"tag:Type","values":["Public"]}],"id":"vpc-0e2e925de622375b5","ids":["subnet-05808ec64faaa18ba","subnet-05f8f3c120238ca8d","subnet-0b57d1924ea055989"],"tags":null,"vpc_id":"vpc-0e2e925de622375b5"}},{"address":"data.aws_subnet_ids.public","mode":"data","type":"aws_subnet_ids","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"filter":[{"name":"tag:Type","values":["Public"]}],"id":"vpc-0e2e925de622375b5","ids":["subnet-05808ec64faaa18ba","subnet-05f8f3c120238ca8d","subnet-0b57d1924ea055989"],"tags":null,"vpc_id":"vpc-0e2e925de622375b5"}},{"address":"data.aws_vpcs.main","mode":"data","type":"aws_vpcs","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"filter":null,"id":"2020-10-15 12:48:18.0609195 +0000 UTC","ids":["vpc-0e2e925de622375b5"],"tags":{"Name":"TEST"}}}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","expressions":{"region":{"constant_value":"eu-west-2"}}}},"root_module":{"outputs":{"broker":{"expression":{"references":["module.broker.broker"]}},"configuration":{"expression":{"references":["module.broker.configuration"]}},"mq_password":{"expression":{"references":["module.broker.mq_password"]}},"mq_username":{"expression":{"references":["module.broker.mq_username"]}}},"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_subnet_ids.private","mode":"data","type":"aws_subnet_ids","name":"private","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"tag:Type"},"values":{"references":["var.sub_private_tag"]}}],"vpc_id":{"references":["data.aws_vpcs.main"]}},"schema_version":0},{"address":"data.aws_subnet_ids.public","mode":"data","type":"aws_subnet_ids","name":"public","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"tag:Type"},"values":{"references":["var.sub_public_tag"]}}],"vpc_id":{"references":["data.aws_vpcs.main"]}},"schema_version":0},{"address":"data.aws_vpcs.main","mode":"data","type":"aws_vpcs","name":"main","provider_config_key":"aws","expressions":{"tags":{"references":["var.vpc_name_tag"]}},"schema_version":0}],"module_calls":{"broker":{"source":"../../","expressions":{"common_tags":{"references":["var.common_tags"]},"mq_broker":{"references":["var.mq_broker"]},"my_config":{"references":["var.my_config"]},"password":{"constant_value":"TobeEncrypted"},"subnet_ids":{"references":["data.aws_subnet_ids.private"]},"username":{"constant_value":"NotAdmin"},"vpc_id":{"references":["data.aws_vpcs.main"]}},"module":{"outputs":{"broker":{"expression":{"references":["aws_mq_broker.broker"]},"description":"The Broker details"},"configuration":{"expression":{"references":["aws_mq_configuration.broker"]},"description":"The broker configuration"},"mq_password":{"expression":{"references":["random_password.password"]},"description":"MQ password"},"mq_username":{"expression":{"references":["var.mq_username"]},"description":"MQ Username"}},"resources":[{"address":"aws_mq_broker.broker","mode":"managed","type":"aws_mq_broker","name":"broker","provider_config_key":"broker:aws","expressions":{"broker_name":{"references":["var.mq_broker"]},"configuration":[{"id":{"references":["aws_mq_configuration.broker"]},"revision":{"references":["aws_mq_configuration.broker"]}}],"encryption_options":[{"kms_key_id":{"constant_value":""},"use_aws_owned_key":{"constant_value":false}}],"engine_type":{"references":["var.mq_broker"]},"engine_version":{"references":["var.mq_broker"]},"host_instance_type":{"references":["var.mq_broker"]},"logs":[{"audit":{"references":["var.audit"]},"general":{"references":["var.logging"]}}],"maintenance_window_start_time":[{"day_of_week":{"references":["var.maintenance_window_start_time"]},"time_of_day":{"references":["var.maintenance_window_start_time"]},"time_zone":{"references":["var.maintenance_window_start_time"]}}],"security_groups":{"references":["aws_security_group.broker"]},"subnet_ids":{"references":["var.subnet_ids"]},"tags":{"references":["var.common_tags"]},"user":[{"password":{"references":["var.password"]},"username":{"references":["var.username"]}}]},"schema_version":0},{"address":"aws_mq_configuration.broker","mode":"managed","type":"aws_mq_configuration","name":"broker","provider_config_key":"broker:aws","expressions":{"data":{"constant_value":"\u003c?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?\u003e\n\u003cbroker xmlns=\"http://activemq.apache.org/schema/core\"\u003e\n  \u003cplugins\u003e\n    \u003cforcePersistencyModeBrokerPlugin persistenceFlag=\"true\"/\u003e\n    \u003cstatisticsBrokerPlugin/\u003e\n    \u003ctimeStampingBrokerPlugin ttlCeiling=\"86400000\" zeroExpirationOverride=\"86400000\"/\u003e\n  \u003c/plugins\u003e\n\u003c/broker\u003e\n"},"description":{"references":["var.my_config"]},"engine_type":{"references":["var.my_config"]},"engine_version":{"references":["var.my_config"]},"name":{"references":["var.my_config"]},"tags":{"references":["var.common_tags"]}},"schema_version":0},{"address":"aws_security_group.broker","mode":"managed","type":"aws_security_group","name":"broker","provider_config_key":"broker:aws","expressions":{"description":{"constant_value":"Managed by Terraform"},"name":{"references":["var.security_group_name"]},"tags":{"references":["var.common_tags"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"random_password.password","mode":"managed","type":"random_password","name":"password","provider_config_key":"broker:random","expressions":{"length":{"constant_value":16},"override_special":{"constant_value":"_%@"},"special":{"constant_value":true}},"schema_version":0}],"variables":{"audit":{"default":false,"description":"To enable audit logging"},"common_tags":{"description":"This is to help you add tags to your cloud objects"},"ingress":{"default":["0.0.0.0/0"]},"logging":{"default":true,"description":"To enable Logging to Cloudwatch"},"maintenance_window_start_time":{"default":{"day_of_week":"MONDAY","time_of_day":"12:05","time_zone":"GMT"},"description":"Describe the Maintenance window block"},"mq_broker":{"description":"MQ broker details"},"mq_username":{"default":"ExampleUser"},"my_config":{"description":"MQ Config"},"password":{},"security_group_name":{"default":"Broker","description":"Broker Security group name"},"subnet_ids":{"description":"Contains subnet ids"},"username":{},"vpc_id":{"description":"The VPC id"}}}}},"variables":{"common_tags":{"description":"This is to help you add tags to your cloud objects"},"mq_broker":{},"my_config":{"description":"MQ Config"},"sub_private_tag":{"default":"*private*"},"sub_public_tag":{"default":"*public*"},"vpc_name_tag":{"default":"*poc*"}}}}}
